# CN_CA01
بطور کلی پروژه در قالب دو فایل کالینت و سرور نوشته شده است. 
در فایل cpp.client ،ابتدا تابع main را داریم که در خط ۱۸ و ۱۹ شماره 
پورت هایی دلبهخواه برای کانال های داده و دستور در نظر گرفته شده
است. در خطهای ۲۷ و ۲۸ ساکتهای این دو کانال ایجاد شده و از آنجا 
که با ساکت مثل فایل برخورد م یشود، شمارهای در قالب descriptor file 
به آن ها اختصاص داده میشود. در خط های ۳۴ و ۴۲ بترتیب کانال های
ایجاد شده برای دستور و داده، به سرور متصل میشوند. از خط ۵۱ تا ۵۳ 
مقداردهی های اولیه برای شروع کار تعاملی اصلی کالی نت انجام شده و از
خط ۵۴ وارد حلقهی بینهایت اصلی می شود که درون آن تعامل با سرور 
انجام میشود. 
در آخر در خطهای ۸۴ و ۸۵ کانالها رو می بندیم. 
در فایل cpp.server در خط ۳۰ دو آرایه از پوی نتر به User ها را داریم 
که بترت یب کاربرانی که نام کاربری خود را وارد کردهاند و رمزعبور خود
را نه و کاربرانی که هر دو را وارد کرده و in log شدهاند را نگه میدارد. 
در خط ۳۲ دو آرایه برای نگه داری شماره فایل دیسکریپتور سوکت های 
سمت سرور برای دو کانال دستور و داده تعر یف شدهاند. 
برای استفاده از دستورات از پو ینتر به فانکشن استفاده شده است که در 
داده ساختار map توابع با key اسم دستور و value آدرس تابع نگه داری 
میشوند. 
برای نمایش پیام ها به کالی نت هم از داده ساختار مشابهی که تعر یف آن در 
هدر hpp.def آمده است استفاده شده است و در خطوط ۷۲ تا ۸۶ این 
پیام ها با key شماره پیام و value متن پیام، insert شدهاند. 
از خط ۹۰ تا ۱۱۰ به خواندن config به کمک کتابخانه های آمادهی مرتبط 
با فایلهای json پرداخته شده است. 
از خط ۱۶۰ تا ۲۸۰ در حلقه ی بینهای ت هستیم که سرور در آن به تعامل 
با کالینت ها میپردازد. 
بین خطوط ۳۲۷ تا ۳۳۶ پیاده سازی تابع log آمده است که با کال شدن
متناسب آن در توابع دستورات، تاریخچه دستورات رس یده به سرور در فایل 
txt.log ثبت م یشود.
بقیه فایل شامل کد پ یاده سازی دستورات است. بطور کلی از روش try
catch and برای مدیریت خطاها استفاده شده است.
در خط ۲۸۳ تا ۲۹۱ پیادهسازی user آمده است که اگر اسم کاربری وارد 
شده با یکی از کاربران ثبت شده تطابق داشت، کاربر را وارد لیست 
incoming ها کرده و پیام مربوطه را چاپ برمیگرداند. 
خط ۳۰۱ تا ۳۱۰ دستور pass آمده که در صورت درست بودن رمزعبور، 
کاربر از آرا یه incomingها وارد in logged ها میشود.
در خط ۲۹۳ تا ۲۹۹ دستور quit آمده است که در صورت NULL نبودن
خانه مربوط به کال ینت در آرا یه ی in logged ها، آن را نال کرده و پیام 
مربوطه را چاپ میکند. 
در خط ۳۱۲ تا ۳۲۵ دستور help آمده است که در قالب یک استرینگ، 
توض یح مربوط به دستورات را برمیگرداند.

[1](https://github.com/Mahdi2Kp/CN_CHomworks1/blob/main/1.JPG)

این دو تابع به کمک ساختمان های موجود در کتابخانه های h.pwd و 
h.stat/sys پیاده سازی شده اند که اطالعاتی از فایل ها را ذخیره میکنند 
و ما در اینجا از آن ها برای پیدا کردن سازنده یک فایل یا دایرکتوری و یا 
گروه آن استفاده می کنیم. به عنوان آرگومان ورودی نام فایل یا دایرکتوری 
که در جلوی دستور آن ها می آید را به آنها میدهیم و این ت وابع سازنده 
فایل)یک یا چند کاربر( را به ما برمیگردانند. 

[2](https://github.com/Mahdi2Kp/CN_CHomworks1/blob/main/2.JPG)

این توابع که برای user ها هستند برای کنترل کردن حجم مصرفی دانلود 
کاربران استفاده می شوند. 
